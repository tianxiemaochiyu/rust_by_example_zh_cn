(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{643:function(e,n,s){"use strict";s.r(n);var t=s(4),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"读取行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#读取行"}},[e._v("#")]),e._v(" 读取行")]),e._v(" "),s("p",[e._v("方法 "),s("code",[e._v("lines()")]),e._v(" 在文件的行上返回一个迭代器。")]),e._v(" "),s("p",[s("code",[e._v("File::open")]),e._v(" 需要一个泛型 "),s("code",[e._v("AsRef<Path>")]),e._v("。这正是 "),s("code",[e._v("read_lines()")]),e._v(" 期望的输入。")]),e._v(" "),s("div",{staticClass:"language-rust,no_run extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('use std::fs::File;\nuse std::io::{self, BufRead};\nuse std::path::Path;\n\nfn main() {\n    // 在生成输出之前，文件主机必须存在于当前路径中\n    if let Ok(lines) = read_lines("./hosts") {\n        // 使用迭代器，返回一个（可选）字符串\n        for line in lines {\n            if let Ok(ip) = line {\n                println!("{}", ip);\n            }      \n        }   \n    }\n}\n\n// 输出包裹在 Result 中以允许匹配错误，\n// 将迭代器返回给文件行的读取器（Reader）。\nfn read_lines<P>(filename: P) -> io::Result<io::Lines<io::BufReader<File>>>\nwhere P: AsRef<Path>, {\n    let file = File::open(filename)?;\n    Ok(io::BufReader::new(file).lines())\n}\n')])])]),s("p",[e._v("运行此程序将一行行将内容打印出来。")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"127.0.0.1'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[e._v("\\n")]),e._v("192.168.0.1"),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[e._v("\\n")]),e._v('"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" hosts\n$ rustc read_lines.rs "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&&")]),e._v(" ./read_lines\n"),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1\n"),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".0.1\n")])])]),s("p",[e._v("这个过程比在内存中创建 "),s("code",[e._v("String")]),e._v(" 更有效，特别是处理更大的文件。")])])}),[],!1,null,null,null);n.default=a.exports}}]);