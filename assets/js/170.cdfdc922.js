(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{649:function(n,t,s){"use strict";s.r(t);var e=s(4),r=Object(e.a)({},(function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"管道"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#管道"}},[n._v("#")]),n._v(" 管道")]),n._v(" "),s("p",[s("code",[n._v("std::Child")]),n._v(" 结构体代表了一个正在运行的子进程，它暴露了 "),s("code",[n._v("stdin")]),n._v("（标准\n输入），"),s("code",[n._v("stdout")]),n._v("（标准输出） 和 "),s("code",[n._v("stderr")]),n._v("（标准错误） 句柄，从而可以通过管道与\n所代表的进程交互。")]),n._v(" "),s("div",{staticClass:"language-rust,editable extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('use std::error::Error;\nuse std::io::prelude::*;\nuse std::process::{Command, Stdio};\n\nstatic PANGRAM: &\'static str =\n"the quick brown fox jumped over the lazy dog\\n";\n\nfn main() {\n    // 启动 `wc` 命令\n    let process = match Command::new("wc")\n                                .stdin(Stdio::piped())\n                                .stdout(Stdio::piped())\n                                .spawn() {\n        Err(why) => panic!("couldn\'t spawn wc: {}", why.description()),\n        Ok(process) => process,\n    };\n\n    // 将字符串写入 `wc` 的 `stdin`。\n    //\n    // `stdin` 拥有 `Option<ChildStdin>` 类型，不过我们已经知道这个实例不为空值，\n    // 因而可以直接 `unwrap 它。\n    match process.stdin.unwrap().write_all(PANGRAM.as_bytes()) {\n        Err(why) => panic!("couldn\'t write to wc stdin: {}",\n                           why.description()),\n        Ok(_) => println!("sent pangram to wc"),\n    }\n\n    // 因为 `stdin` 在上面调用后就不再存活，所以它被 `drop` 了，管道也被关闭。\n    //\n    // 这点非常重要，因为否则 `wc` 就不会开始处理我们刚刚发送的输入。\n\n    // `stdout` 字段也拥有 `Option<ChildStdout>` 类型，所以必需解包。\n    let mut s = String::new();\n    match process.stdout.unwrap().read_to_string(&mut s) {\n        Err(why) => panic!("couldn\'t read wc stdout: {}",\n                           why.description()),\n        Ok(_) => print!("wc responded with:\\n{}", s),\n    }\n}\n')])])])])}),[],!1,null,null,null);t.default=r.exports}}]);