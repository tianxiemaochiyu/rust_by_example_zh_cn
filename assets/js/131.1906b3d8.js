(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{609:function(t,o,n){"use strict";n.r(o);var e=n(4),a=Object(e.a)({},(function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"可变性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可变性"}},[t._v("#")]),t._v(" 可变性")]),t._v(" "),n("p",[t._v("可变数据可以使用 "),n("code",[t._v("&mut T")]),t._v(" 进行可变借用。这叫做"),n("strong",[t._v("可变引用")]),t._v("（mutable\nreference），它使借用者可以读/写数据。相反，"),n("code",[t._v("&T")]),t._v(" 通过不可变引用（immutable\nreference）来借用数据，借用者可以读数据而不能更改数据：")]),t._v(" "),n("div",{staticClass:"language-rust,editable,ignore,mdbook-runnable extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('#[allow(dead_code)]\n#[derive(Clone, Copy)]\nstruct Book {\n    // `&\'static str` 是一个对分配在只读内存区的字符串的引用\n    author: &\'static str,\n    title: &\'static str,\n    year: u32,\n}\n\n// 此函数接受一个对 Book 类型的引用\nfn borrow_book(book: &Book) {\n    println!("I immutably borrowed {} - {} edition", book.title, book.year);\n}\n\n// 此函数接受一个对可变的 Book 类型的引用，它把年份 `year` 改为 2014 年\nfn new_edition(book: &mut Book) {\n    book.year = 2014;\n    println!("I mutably borrowed {} - {} edition", book.title, book.year);\n}\n\nfn main() {\n    // 创建一个名为 `immutabook` 的不可变的 Book 实例\n    let immutabook = Book {\n        // 字符串字面量拥有 `&\'static str` 类型\n        author: "Douglas Hofstadter",\n        title: "Gödel, Escher, Bach",\n        year: 1979,\n    };\n\n    // 创建一个 `immutabook` 的可变拷贝，命名为 `mutabook`\n    let mut mutabook = immutabook;\n    \n    // 不可变地借用一个不可变对象\n    borrow_book(&immutabook);\n\n    // 不可变地借用一个可变对象\n    borrow_book(&mutabook);\n    \n    // 可变地借用一个可变对象\n    new_edition(&mut mutabook);\n    \n    // 报错！不能可变地借用一个不可变对象\n    new_edition(&mut immutabook);\n    // 改正 ^ 注释掉此行\n}\n')])])]),n("h3",{attrs:{id:"参见："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参见："}},[t._v("#")]),t._v(" 参见：")]),t._v(" "),n("p",[n("RouterLink",{attrs:{to:"/scope/lifetime/static_lifetime.html"}},[n("code",[t._v("static")])])],1)])}),[],!1,null,null,null);o.default=a.exports}}]);